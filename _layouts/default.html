<!DOCTYPE html>
<html lang="da" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Fira+Code:wght@400;500&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>

<div class="container">
    
    <nav class="top-nav">
        <a href="/" class="nav-brand">~/dennisoersted</a>
        
        <div class="nav-right">
            <ul>
                <li><a href="#projekter">cd ./projects</a>,</li>
                <li><a href="#kontakt">cd ./contact</a>,</li>
            </ul>
            
            <div class="theme-wrapper">
                <a id="theme-toggle-link">./toggle-theme.sh</a>

                <select id="theme-select" class="theme-select">
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="dracula">Dracula</option>
                    <option value="catppuccin">Catppuccin</option>
                    <option value="monokai">Monokai</option>
                    <option value="tokyo-night">Tokyo Night</option>
                </select>
            </div>

        </div>
    </nav>

    <section class="hero-split">
        <div class="hero-text">
            <h1>Dennis √òrsted Petersen</h1>
            <span class="tagline">> <span id="typed-text"></span><span style="animation: blink 1s infinite">_</span></span>
            <div class="intro-bio">{{ content }}</div>
        </div>

        <div class="hero-image-container">
            <img src="/assets/mig.jpg" alt="Portr√¶t" class="hero-image">
        </div>
    </section>

    <section id="projekter">
        <h2>./projects</h2>
        <div id="github-projects">
            <p style="font-family: 'Fira Code'">Fetching repositories...</p>
        </div>
    </section>

    <section id="kontakt" class="contact-section">
        <h2>./contact</h2>
        <p style="max-width: 600px; margin: 0 auto; color: var(--accent-color);">
            Connect with me via the links below
        </p>
        
        <div class="contact-icons">
            <a href="mailto:dennisoersted@gmail.com" title="Email"><i class="fa-solid fa-envelope"></i></a>
            <a href="https://www.linkedin.com/in/dennisoersted/" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
            <a href="https://github.com/dennisoersted" target="_blank" title="GitHub"><i class="fa-brands fa-github"></i></a>
            <a href="https://www.instagram.com/dennisoersted/" target="_blank" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://bsky.app/profile/dennisoersted.bsky.social" target="_blank" title="Mastodon/Fediverse"><i class="fa-brands fa-mastodon"></i></a>
        </div>
    </section>

    <footer style="margin-top: 80px; text-align: center; color: var(--accent-color); font-size: 0.8rem; font-family: 'Fira Code'; opacity: 0.5;">
        <p>
            <a id="git-footer" href="#" target="_blank" style="color: inherit; text-decoration: none; border-bottom: 1px dashed var(--accent-color);" title="Play Song üéµ">
                loading git joke...
            </a>
        </p>
    </footer>

</div>

<script>
    // --- TYPEWRITER ---
    const phrases = ['Data Science Student @ SDU', 'HR Consultant @ OUH', 'Dad @ Home', 'Coffee Driven'];
    let phraseIndex = 0, letterIndex = 0, isDeleting = false;
    const textEl = document.getElementById('typed-text');

    function type() {
        const current = phrases[phraseIndex];
        if (isDeleting) {
            textEl.textContent = current.substring(0, letterIndex - 1); letterIndex--;
        } else {
            textEl.textContent = current.substring(0, letterIndex + 1); letterIndex++;
        }
        if (!isDeleting && letterIndex === current.length) {
            isDeleting = true; setTimeout(type, 2000);
        } else if (isDeleting && letterIndex === 0) {
            isDeleting = false; phraseIndex = (phraseIndex + 1) % phrases.length; setTimeout(type, 500);
        } else {
            setTimeout(type, isDeleting ? 50 : 100);
        }
    }
    document.addEventListener('DOMContentLoaded', type);

    // --- SYNCHRONIZED THEME LOGIC ---
    const toggleLink = document.getElementById('theme-toggle-link');
    const themeSelect = document.getElementById('theme-select');
    const htmlEl = document.documentElement;
    const themes = ['dark', 'light', 'dracula', 'catppuccin', 'monokai', 'tokyo-night'];

    // Funktion der s√¶tter temaet (opdaterer b√•de HTML og Dropdown)
    function setTheme(themeName) {
        if (themes.includes(themeName)) {
            // S√¶t tema p√• HTML
            htmlEl.setAttribute('data-theme', themeName);
            // Gem i localStorage
            localStorage.setItem('theme', themeName);
            // Opdater dropdown s√• den matcher
            if (themeSelect) themeSelect.value = themeName;
        }
    }

    // 1. Initialiser ved load
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        setTheme(savedTheme);
    } else {
        setTheme('dark');
    }

    // 2. Klik p√• Link: G√• til n√¶ste tema i listen
    if (toggleLink) {
        toggleLink.addEventListener('click', (e) => {
            e.preventDefault();
            const currentTheme = htmlEl.getAttribute('data-theme') || 'dark';
            const currentIndex = themes.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themes.length;
            setTheme(themes[nextIndex]);
        });
    }

    // 3. √Ündring i Dropdown: Hop direkte til valgt tema
    if (themeSelect) {
        themeSelect.addEventListener('change', (e) => {
            setTheme(e.target.value);
        });
    }

    // --- RANDOM GIT JOKE ---
    const gitJokes = [
        { cmd: 'git -mv -on -up', url: 'https://www.youtube.com/watch?v=6Z66wVo7uNw' }, 
        { cmd: 'git push it --real-good', url: 'https://www.youtube.com/watch?v=vCadcBR95oU' }, 
        { cmd: 'git push origin limit --force', url: 'https://www.youtube.com/watch?v=vT8OU5WtfkQ' }, 
        { cmd: 'git blame --on-the-boogie', url: 'https://www.youtube.com/watch?v=nqxVMLVe62U' }, 
        { cmd: 'git branch grapevine', url: 'https://www.youtube.com/watch?v=hajBdDM2qdg' }, 
    ];

    function randomGitJoke() {
        const footerLink = document.getElementById('git-footer');
        if (footerLink) {
            const random = gitJokes[Math.floor(Math.random() * gitJokes.length)];
            footerLink.innerText = random.cmd;
            footerLink.href = random.url;
        }
    }
    document.addEventListener('DOMContentLoaded', randomGitJoke);

    // --- GITHUB WIDGET ---
    const githubUser = 'dennisoersted'; 

    async function getRepos() {
        const container = document.getElementById('github-projects');
        try {
            const res = await fetch(`https://api.github.com/users/${githubUser}/repos?sort=pushed&per_page=6`);
            if(!res.ok) throw new Error();
            const data = await res.json();
            container.innerHTML = '';
            data.forEach(repo => {
                container.innerHTML += `
                    <a href="${repo.html_url}" target="_blank" class="project-card">
                        <h3>${repo.name}</h3>
                        <p>${repo.description || 'Ingen beskrivelse.'}</p>
                        <div class="repo-stats">
                            <span>‚óè ${repo.language || 'Code'}</span>
                            <span>‚òÖ ${repo.stargazers_count}</span>
                        </div>
                    </a>`;
            });
        } catch(e) { container.innerHTML = 'Kunne ikke hente GitHub data.'; }
    }
    getRepos();
</script>

</body>
</html>